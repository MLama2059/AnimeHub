@page "/add-anime"
@using AnimeHub.Shared.Models
@inject HttpClient Http
@inject NavigationManager Navigation

<h3>Add a New Anime</h3>

<EditForm Model="@newAnime" OnValidSubmit="@HandleValidSubmit">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div>
        <label for="title">Title:</label>
        <InputText id="title" @bind-Value="newAnime.Title" class="form-control"></InputText>
    </div>
    <div class="mt-2">
        <label for="genre">Genre:</label>
        <InputText id="genre" @bind-Value="newAnime.Genre" class="form-control"></InputText>
    </div>
    <div class="mt-2">
        <label for="episodes">Episodes:</label>
        <InputNumber id="episodes" @bind-Value="newAnime.Episodes" class="form-control"></InputNumber>
    </div>
    <div class="mt-2">
        <label for="yearPublished">Year Published:</label>
        <InputNumber id="yearPublished" @bind-Value="newAnime.YearPublished" class="form-control"></InputNumber>
    </div>
    
    <button type="submit" class="btn btn-primary mt-3">Add Anime</button>

</EditForm>

@code {
    private Anime newAnime = new Anime();

    private async Task HandleValidSubmit()
    {
        await Http.PostAsJsonAsync("api/anime", newAnime);
        Navigation.NavigateTo("fetchanime");
    }
}
