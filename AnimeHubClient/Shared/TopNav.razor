@inject NavigationManager Navigation

<MudAppBar Color="Color.Primary" Fixed="true" Elevation="2">
    <MudText Typo="Typo.h6" Class="ml-2" Style="cursor:pointer" @onclick='() => Navigation.NavigateTo("/")'>
        AnimeHub
    </MudText>

    <MudSpacer />

    <MudTextField @bind-Value="_search" Placeholder="Search anime..." Adornment="Adornment.Start"
                  AdornmentIcon="@Icons.Material.Filled.Search" Immediate="true" OnAdornmentClick="OnSearch" Class="me-2" />

    <MudButton Variant="Variant.Outlined" Color="Color.Secondary" @onclick='() => Navigation.NavigateTo("anime")'>Browse</MudButton>
    <MudButton Variant="Variant.Filled" Color="Color.Info" Class="ms-2" @onclick='() => Navigation.NavigateTo("admin")'>Admin</MudButton>
</MudAppBar>

@code {
    private string _search = string.Empty;

    private void OnSearch()
    {
        if (!string.IsNullOrWhiteSpace(_search))
            Navigation.NavigateTo($"/anime?q={Uri.EscapeDataString(_search)}");
    }
}
